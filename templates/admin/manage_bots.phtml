<h1 class="text-3xl font-bold text-purple-800 mb-6">Gerenciar Bots</h1>

<?php if (!empty($success_message)): ?>
    <div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4"><?php echo $success_message; ?></div>
<?php endif; ?>
<?php if (!empty($errors)): ?>
    <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4"><ul><?php foreach ($errors as $error) echo "<li>$error</li>"; ?></ul></div>
<?php endif; ?>

<div class="grid md:grid-cols-2 gap-8">
    <!-- Card para Criar Bots -->
    <div class="bg-white p-6 rounded-lg shadow-md">
        <h2 class="text-xl font-bold mb-4">Criar Novos Bots</h2>
        <p class="text-sm text-gray-600 mb-4">Selecione uma sala e a quantidade de bots que deseja adicionar para simular atividade.</p>
        <form action="/admin/manage-bots" method="POST">
            <div class="mb-4">
                <label for="room_id" class="block text-gray-700 font-bold mb-2">Adicionar bots à sala:</label>
                <select id="room_id" name="room_id" class="w-full px-3 py-2 border rounded-lg" required>
                    <option value="">-- Selecione uma sala --</option>
                    <?php foreach ($all_rooms as $room): ?>
                        <option value="<?php echo $room['id']; ?>"><?php echo htmlspecialchars($room['name']); ?></option>
                    <?php endforeach; ?>
                </select>
            </div>
            <div class="mb-4">
                <label for="bot_count" class="block text-gray-700 font-bold mb-2">Quantidade de bots a criar:</label>
                <input type="number" id="bot_count" name="bot_count" min="1" max="50" value="10" class="w-full px-3 py-2 border rounded-lg" required>
            </div>
            <button type="submit" name="create_bots" class="w-full bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600">
                Criar Bots
            </button>
        </form>
    </div>

    <!-- Card para Apagar Bots -->
    <div class="bg-white p-6 rounded-lg shadow-md">
        <h2 class="text-xl font-bold mb-4 text-red-700">Zona de Perigo</h2>
        <p class="text-sm text-gray-600 mb-4">Esta ação irá apagar permanentemente **TODOS** os utilizadores marcados como bots do sistema. Esta ação não pode ser desfeita.</p>
        <form action="/admin/manage-bots" method="POST" onsubmit="return confirm('Tem a certeza que deseja apagar TODOS os bots? Esta ação é irreversível.');">
            <button type="submit" name="delete_all_bots" class="w-full bg-red-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-700">
                Apagar Todos os Bots
            </button>
        </form>
    </div>
</div>
